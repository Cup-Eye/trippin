<div class="timeframes-container" >
  <div class="row">
    <div class="col-12 col-lg-2">
      <div class="side-menu">

        <div class=side-link>
          <%= link_to (trip_path(@board.trip)) do %>
            <div class="side-button" id="B">
              <div id="Bl">Back to Boards </div>
            </div>
          <%end%>
        </div>

        <div class="side-link">
          <%= link_to (timeframe_board_timeframes_path(@trip.timeframe_board)) do %>
            <div class="side-button" id="active">
              <i class="far fa-calendar-alt fa-2x"></i>
              <div id="Active">Time Frames</div>
            </div>
          <%end%>
        </div>

        <div class="side-link">
          <%=link_to (destination_board_destinations_path(@trip.destination_board)) do %>
            <div class= "side-button" id="D">
              <i class="fas fa-globe-americas fa-2x"></i>
              <div id="Dl">Destination</div>
            </div>
          <%end%>
        </div>

        <div class="side-link">
          <%= link_to (transportation_board_transportations_path(@trip.transportation_board)) do %>
            <div class="side-button" id="T">
              <i class="fas fa-plane fa-2x"></i>
              <div id="Tl">Transportation</div>
            </div>
          <%end%>
        </div>

        <div class="side-link">
          <%= link_to (accommodation_board_accommodations_path(@trip.accommodation_board)) do %>
            <div class= "side-button" id="A">
              <i class="fas fa-home fa-2x"></i>
              <div id="Al">Accommodation</div>
            </div>
          <%end%>
        </div>
      </div>
    </div>

</div>
  <h1>Proposed Timeframes: </h1>

  <%= link_to "Add a Timeframe", new_timeframe_board_timeframe_path(@board), class: "add" %>

  <% if @timeframes.any? %>

    <div class="wrapper" style="grid-template-columns: repeat(<%= @total_dates + 1%>, minmax(45px, 50px));">

    <!-- display month -->

    <!-- display weekdays and dates -->

    <% @total_dates.times do |i| %>
      <span class="<%="grid-month-#{@first_day_grid.month}"%>"></span>
      <div class="grid-day" style='grid-column: <%= i + 3 %> / span 1 ; grid-row: 2/ span 1;'><%= (@first_day_grid).strftime('%a %e.%m') %>
      </div>
      <% @first_day_grid += 1 %>
    <% end %>

    <% @board.trip.active_users.each_with_index do |user, index| %>
        <div class="two" style='grid-column: 1 / span 2 ; grid-row: <%= index + 3 %> / <%= index + 3 %> ;'>
          <%= user.first_name %>:
        </div>
        <% user.timeframes.each do |timeframe| %>
        <div class="one" style='grid-column: <%= 3 + (timeframe.start_date - @earliest_date).to_i %> / <%= (timeframe.start_date - @earliest_date).to_i + 4 + (timeframe.end_date - timeframe.start_date).to_i %>; grid-row: <%= index + 3 %>/ <%= index + 3 %> ;'>
          <div class="d-flex justify-content-between"><%= (timeframe.start_date).strftime('%e.%m') %> - <%= (timeframe.end_date).strftime('%e.%m') %>
          </div>

          <%= link_to "✏️", edit_timeframe_path(timeframe) %>
          <%= link_to "🗑", timeframe_path(timeframe),
                method: :delete,
              data: { confirm: "Are you sure you want to delete this Timeframe?" }%>
        </div>
      <% end %>
    <% end %>
  </div>

    <% end %>
  </div>

  <p>------------------------</p>

    <% @timeframes.each do |tf| %>
    <p><%= tf.start_date.strftime('%e.%m') %> - <%= tf.end_date.strftime('%e.%m.%Y') %> (<%=tf.user.first_name%>)


      <%= link_to "Edit", edit_timeframe_path(tf) %>
      <%= link_to "Delete", timeframe_path(tf),
      method: :delete,
      data: { confirm: "Are you sure you want to delete this Timeframe?" }%>
    </p>
    <p> <%= tf.description %> </p>
  <% end %>

